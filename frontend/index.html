<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume & Portfolio Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --bg-soft: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.08);
      --text: #e5e7eb;
      --text-muted: #9ca3af;
      --border: #1f2937;
    }

    /* LIGHT THEME VARIABLES */
    body.light-theme {
      --bg: #f1f5f9;
      --bg-soft: #ffffff;
      --accent: #0284c7;
      --accent-soft: rgba(2, 132, 199, 0.08);
      --text: #0f172a;
      --text-muted: #475569;
      --border: #cbd5e1;
      background: #e5edf7 !important;
      color: var(--text);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      background: radial-gradient(circle at top, var(--bg), #000000 60%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      transition: background 0.25s ease, color 0.25s ease;
    }

    .app {
      width: 100%;
      max-width: 1000px;
      background: linear-gradient(135deg, var(--bg-soft), var(--bg));
      border-radius: 20px;
      border: 1px solid var(--border);
      box-shadow:
        0 12px 30px rgba(15, 23, 42, 0.85),
        0 0 0 1px rgba(15, 23, 42, 0.8);
      padding: 18px 18px 20px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      transition: background 0.25s ease, border-color 0.25s ease,
        box-shadow 0.25s ease;
    }

    body.light-theme .app {
      box-shadow:
        0 10px 24px rgba(15, 23, 42, 0.16),
        0 0 0 1px rgba(148, 163, 184, 0.3);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .title-wrap {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-badge {
      font-size: 11px;
      padding: 1px 8px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: rgba(15, 23, 42, 0.9);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    body.light-theme .title-badge {
      background: rgba(255, 255, 255, 0.9);
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav {
      display: flex;
      gap: 6px;
      background: var(--bg-soft);
      padding: 4px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }

    .nav button {
      position: relative;
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: 7px 12px;
      font-size: 12px;
      font-weight: 500;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      transition:
        color 0.18s ease,
        background 0.18s ease,
        transform 0.08s ease;
    }

    .nav button span.icon {
      font-size: 13px;
    }

    .nav button.active {
      color: var(--accent);
      background: var(--accent-soft);
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.4);
    }

    .nav button:hover:not(.active) {
      background: rgba(15, 23, 42, 0.08);
      color: var(--text);
    }

    .content {
      display: grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 12px;
      align-items: stretch;
    }

    .card {
      border-radius: 18px;
      background: var(--bg-soft);
      border: 1px solid var(--border);
      padding: 14px 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      transition: background 0.25s ease, border-color 0.25s ease;
    }

    body.light-theme .card {
      background: #ffffff;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 4px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-muted);
    }

    .card-header-right {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px 10px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 3px;
      font-size: 11px;
    }

    .field label {
      color: var(--text-muted);
      font-weight: 500;
    }

    .field input,
    .field textarea,
    .field select {
      border-radius: 10px;
      border: 1px solid var(--border);
      padding: 7px 8px;
      font-size: 12px;
      background: var(--bg);
      color: var(--text);
      outline: none;
      resize: vertical;
      min-height: 32px;
      transition:
        border-color 0.16s ease,
        box-shadow 0.16s ease,
        background 0.16s ease,
        color 0.16s ease;
    }

    body.light-theme .field input,
    body.light-theme .field textarea,
    body.light-theme .field select {
      background: #ffffff;
    }

    .field textarea {
      min-height: 70px;
    }

    .field input:focus,
    .field textarea:focus,
    .field select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      background: var(--bg-soft);
    }

    .field-inline {
      display: flex;
      gap: 8px;
    }

    .field-inline > * {
      flex: 1;
    }

    .section-label {
      font-size: 11px;
      color: var(--text-muted);
      margin: 4px 0 2px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 6px 11px;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      background: var(--bg-soft);
      color: var(--text);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      transition:
        background 0.16s ease,
        border-color 0.16s ease,
        transform 0.08s ease,
        box-shadow 0.16s ease,
        color 0.16s ease;
    }

    .btn-ghost {
      background: transparent;
    }

    .btn-primary {
      border-color: rgba(56, 189, 248, 0.9);
      background: radial-gradient(circle at top left, #0ea5e9, #0369a1);
      color: #e5f6ff;
      box-shadow:
        0 10px 26px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(15, 23, 42, 0.7);
    }

    body.light-theme .btn-primary {
      box-shadow:
        0 8px 20px rgba(15, 23, 42, 0.25),
        0 0 0 1px rgba(148, 163, 184, 0.4);
    }

    .btn:hover {
      transform: translateY(-0.5px);
      background: rgba(15, 23, 42, 0.08);
    }

    .btn-primary:hover {
      filter: brightness(1.03);
    }

    .btn span.icon {
      font-size: 12px;
    }

    .theme-btn {
      padding-inline: 10px;
    }

    .resume-preview {
      background: radial-gradient(circle at top, var(--bg-soft), var(--bg));
      border-radius: 18px;
      border: 1px solid var(--border);
      padding: 12px 12px 14px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
      overflow: auto;
      max-height: 440px;
      transition: background 0.25s ease, border-color 0.25s ease;
    }

    body.light-theme .resume-preview {
      background: #ffffff;
    }

    .preview-header {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding-bottom: 6px;
      border-bottom: 1px dashed var(--border);
    }

    .preview-name {
      font-size: 16px;
      font-weight: 600;
    }

    .preview-headline {
      color: var(--text-muted);
      font-size: 12px;
    }

    .preview-contact {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .preview-section {
      margin-top: 8px;
    }

    .preview-section-title {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin-bottom: 3px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 3px;
    }

    .pill {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: var(--bg-soft);
      color: var(--text);
    }

    .project-list {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 3px;
      font-size: 11px;
    }

    .project-item {
      padding: 6px 7px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg);
      transition: background 0.2s ease, border-color 0.2s ease;
    }

    body.light-theme .project-item {
      background: #f8fafc;
    }

    .project-item-title {
      font-weight: 500;
      margin-bottom: 1px;
    }

    .project-item-link {
      font-size: 10px;
      color: var(--accent);
    }

    .ats-score-box {
      border-radius: 18px;
      border: 1px dashed rgba(56, 189, 248, 0.7);
      background: var(--bg-soft);
      padding: 10px 10px 9px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
      margin-top: 4px;
      transition: background 0.25s ease, border-color 0.25s ease;
    }

    body.light-theme .ats-score-box {
      background: #f8fafc;
    }

    .ats-score-main {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .ats-score-number {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.06em;
    }

    .ats-score-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .ats-score-chip {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(74, 222, 128, 0.7);
      color: #bbf7d0;
      background: rgba(22, 163, 74, 0.14);
    }

    .ats-help-text {
      font-size: 10px;
      color: var(--text-muted);
    }

    .footer-note {
      font-size: 10px;
      color: var(--text-muted);
      text-align: right;
      margin-top: 2px;
    }

    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    @media (max-width: 900px) {
  .content {
    grid-template-columns: minmax(0, 1fr);
  }

  .resume-preview {
    max-height: none;
  }

  .app {
    max-width: 100%;
  }
}

@media (max-width: 640px) {
  body {
    padding: 8px;
  }

  .app {
    padding: 10px 8px 12px;
    border-radius: 0;
    box-shadow: none;
    max-width: 100%;
  }

  .app-header {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .header-right {
    width: 100%;
    justify-content: space-between;
    gap: 6px;
  }

  .nav {
    flex: 1;
  }

  .nav button {
    font-size: 11px;
    padding: 6px 8px;
  }

  .content {
    gap: 8px;
  }

  .card {
    padding: 10px 10px 12px;
    border-radius: 12px;
  }

  .field input,
  .field textarea,
  .field select {
    font-size: 12px;
  }

  .card .btn {
    width: 100%;
    justify-content: center;
  }

  .field-inline {
    flex-direction: column;
  }
}

  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="title-wrap">
        <div class="title">
          Minimal Resume Studio
          <span class="title-badge">Local Prototype</span>
        </div>
        <div class="subtitle">
          Single-page resume + portfolio + ATS checker, designed to stay compact.
        </div>
      </div>

      <div class="header-right">
        <button id="themeToggle" class="btn btn-ghost theme-btn">
          <span class="icon" id="themeIcon">üåô</span>
          <span id="themeLabel">Dark</span>
        </button>

        <nav class="nav">
          <button class="active" data-view="resume">
            <span class="icon">üìÑ</span>
            Resume
          </button>
          <button data-view="portfolio">
            <span class="icon">üß©</span>
            Portfolio
          </button>
          <button data-view="ats">
            <span class="icon">üéØ</span>
            ATS Score
          </button>
        </nav>
      </div>
    </header>

    <main class="content">
      <!-- Left side: forms -->
      <section>
        <!-- Resume Builder View -->
        <div id="view-resume" class="card view active">
          <div class="card-header">
            <div>
              <div class="card-title">Resume Builder</div>
              <div class="card-subtitle">
                Fill the basics. Preview updates instantly on the right.
              </div>
            </div>
            <div class="card-header-right">Step ‚Ä¢ 01</div>
          </div>

          <div class="form-grid">
            <div class="field">
              <label for="name">Full name</label>
              <input id="name" type="text" value="Roopak Shastri" />
            </div>
            <div class="field">
              <label for="headline">Headline / Role</label>
              <input
                id="headline"
                type="text"
                value="Frontend Developer"
              />
            </div>
            <div class="field">
              <label for="email">Email</label>
              <input
                id="email"
                type="email"
                value="roopak@example.com"
              />
            </div>
            <div class="field">
              <label for="phone">Phone</label>
              <input id="phone" type="text" value="+91 98765 43210" />
            </div>
          </div>

          <div class="section-label">Summary</div>
          <div class="field">
            <textarea
              id="summary"
            >Passionate frontend developer with a focus on clean UI, minimal design and fast, accessible web experiences.</textarea>
          </div>

          <div class="section-label">Experience</div>
          <div class="field">
            <textarea
              id="experience"
            >Frontend Intern ¬∑ XYZ Studio ¬∑ 2024
- Built small React and vanilla JS interfaces
- Collaborated with designers to ship responsive layouts</textarea>
          </div>

          <div class="section-label">Education</div>
          <div class="field">
            <textarea
              id="education"
            >BCA in Media and IT ¬∑ Your College ¬∑ 2022‚Äì2025</textarea>
          </div>

          <div class="section-label">Skills (comma separated)</div>
          <div class="field">
            <input
              id="skills"
              type="text"
              value="JavaScript, React, HTML, CSS, Python, FastAPI"
            />
          </div>
        </div>

        <!-- Portfolio View -->
        <div id="view-portfolio" class="card view">
          <div class="card-header">
            <div>
              <div class="card-title">Portfolio Builder</div>
              <div class="card-subtitle">
                Add small projects. They appear under ‚ÄúPortfolio Projects‚Äù.
              </div>
            </div>
            <div class="card-header-right">Step ‚Ä¢ 02</div>
          </div>

          <div class="field">
            <label for="projectTitle">Project title</label>
            <input
              id="projectTitle"
              type="text"
              placeholder="Minimal Resume Builder Web App"
            />
          </div>

          <div class="field">
            <label for="projectDesc">Short description</label>
            <textarea
              id="projectDesc"
              placeholder="What this project does, stack used, and your main contribution."
            ></textarea>
          </div>

          <div class="field">
            <label for="projectLink">Link (GitHub / live)</label>
            <input
              id="projectLink"
              type="url"
              placeholder="https://github.com/username/project"
            />
          </div>

          <div>
            <button id="addProjectBtn" class="btn btn-primary">
              <span class="icon">Ôºã</span> Add project to preview
            </button>
          </div>
        </div>

        <!-- ATS View -->
        <div id="view-ats" class="card view">
          <div class="card-header">
            <div>
              <div class="card-title">Quick ATS Check</div>
              <div class="card-subtitle">
                Simple local keyword score. Later you‚Äôll replace this with backend logic.
              </div>
            </div>
            <div class="card-header-right">Step ‚Ä¢ 03</div>
          </div>

          <div class="field">
            <label for="jobDescription">Job description</label>
            <textarea
              id="jobDescription"
              placeholder="Paste a JD here. The tool compares it with your resume text."
            ></textarea>
          </div>

          <div class="field">
            <label for="resumeTextForATS">Resume text to analyse</label>
            <textarea
              id="resumeTextForATS"
              placeholder="Paste your resume text here, or click ‚ÄúUse current resume‚Äù."
            ></textarea>
          </div>

          <div class="field-inline">
            <button id="useCurrentResumeBtn" class="btn btn-ghost">
              <span class="icon">‚á¢</span> Use current resume
            </button>
            <button id="checkATSBtn" class="btn btn-primary">
              <span class="icon">‚ö°</span> Check ATS score
            </button>
          </div>

          <div class="ats-score-box" id="atsScoreBox">
            <div class="ats-score-main">
              <div>
                <div class="ats-score-label">Current score</div>
                <div class="ats-score-number" id="atsScoreValue">‚Äì</div>
              </div>
              <div class="ats-score-chip" id="atsScoreChip">
                Waiting for analysis
              </div>
            </div>
            <div class="ats-help-text" id="atsScoreHelp">
              This is a simple keyword-overlap prototype. For your final mini project,
              this box will be powered by your backend.
            </div>
          </div>
        </div>
      </section>

      <!-- Right side: preview -->
      <section>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Live Preview</div>
              <div class="card-subtitle">
                Rough layout of your one-page resume + portfolio.
              </div>
            </div>
            <div class="card-header-right">Preview</div>
          </div>

          <div class="resume-preview" id="resumePreview">
          </div>
          <div class="footer-note">
            Edit fields on the left ‚Äî this preview is what an exported PDF could look like.
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // NAV / VIEWS
    const navButtons = document.querySelectorAll(".nav button");
    const views = {
      resume: document.getElementById("view-resume"),
      portfolio: document.getElementById("view-portfolio"),
      ats: document.getElementById("view-ats"),
    };

    navButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const view = btn.getAttribute("data-view");
        navButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        Object.keys(views).forEach((key) => {
          views[key].classList.toggle("active", key === view);
        });
      });
    });

    // FORM + PREVIEW
    const nameInput = document.getElementById("name");
    const headlineInput = document.getElementById("headline");
    const emailInput = document.getElementById("email");
    const phoneInput = document.getElementById("phone");
    const summaryInput = document.getElementById("summary");
    const experienceInput = document.getElementById("experience");
    const educationInput = document.getElementById("education");
    const skillsInput = document.getElementById("skills");
    const resumePreview = document.getElementById("resumePreview");

    let projects = [
      {
        title: "Minimal Resume & Portfolio Builder",
        desc: "Web app prototype that lets users create resumes, add portfolio projects and run a simple ATS-style score locally.",
        link: "https://github.com/your-handle/resume-prototype",
      },
    ];

    function renderPreview() {
      const name = nameInput.value.trim() || "Your Name";
      const headline =
        headlineInput.value.trim() || "Your primary role or headline";
      const email = emailInput.value.trim();
      const phone = phoneInput.value.trim();
      const summary =
        summaryInput.value.trim() ||
        "Short summary about who you are, your strongest skills and what kind of roles you are targeting.";
      const experience =
        experienceInput.value.trim() ||
        "Add your internships, projects or freelance work here.";
      const education =
        educationInput.value.trim() ||
        "Add your current or most recent education details here.";
      const skillsRaw = skillsInput.value.trim();

      const skills =
        skillsRaw.length > 0
          ? skillsRaw.split(",").map((s) => s.trim()).filter(Boolean)
          : ["HTML", "CSS", "JavaScript"];

      const contactParts = [];
      if (email) contactParts.push(email);
      if (phone) contactParts.push(phone);

      let html = "";

      html += `
        <div class="preview-header">
          <div class="preview-name">${name}</div>
          <div class="preview-headline">${headline}</div>
          ${
            contactParts.length
              ? `<div class="preview-contact">${contactParts.join(" ‚Ä¢ ")}</div>`
              : ""
          }
        </div>
      `;

      html += `
        <div class="preview-section">
          <div class="preview-section-title">Summary</div>
          <div>${summary.replace(/\n/g, "<br>")}</div>
        </div>
      `;

      html += `
        <div class="preview-section">
          <div class="preview-section-title">Experience</div>
          <div>${experience.replace(/\n/g, "<br>")}</div>
        </div>
      `;

      html += `
        <div class="preview-section">
          <div class="preview-section-title">Education</div>
          <div>${education.replace(/\n/g, "<br>")}</div>
        </div>
      `;

      if (skills.length) {
        html += `
          <div class="preview-section">
            <div class="preview-section-title">Skills</div>
            <div class="pill-row">
              ${skills.map((s) => `<span class="pill">${s}</span>`).join("")}
            </div>
          </div>
        `;
      }

      if (projects.length) {
        html += `
          <div class="preview-section">
            <div class="preview-section-title">Portfolio Projects</div>
            <div class="project-list">
              ${projects
                .map((p) => {
                  const linkPart = p.link
                    ? `<div class="project-item-link">${p.link}</div>`
                    : "";
                  return `
                    <div class="project-item">
                      <div class="project-item-title">${p.title}</div>
                      <div>${p.desc}</div>
                      ${linkPart}
                    </div>
                  `;
                })
                .join("")}
            </div>
          </div>
        `;
      }

      resumePreview.innerHTML = html;
    }

    [
      nameInput,
      headlineInput,
      emailInput,
      phoneInput,
      summaryInput,
      experienceInput,
      educationInput,
      skillsInput,
    ].forEach((el) => {
      el.addEventListener("input", renderPreview);
    });

    renderPreview();

    // PORTFOLIO ADD
    const projectTitleInput = document.getElementById("projectTitle");
    const projectDescInput = document.getElementById("projectDesc");
    const projectLinkInput = document.getElementById("projectLink");
    const addProjectBtn = document.getElementById("addProjectBtn");

    addProjectBtn.addEventListener("click", () => {
      const title = projectTitleInput.value.trim();
      const desc = projectDescInput.value.trim();
      const link = projectLinkInput.value.trim();

      if (!title && !desc) {
        alert("Add at least a project title or description.");
        return;
      }

      projects.push({ title: title || "Untitled Project", desc, link });
      projectTitleInput.value = "";
      projectDescInput.value = "";
      projectLinkInput.value = "";
      renderPreview();
    });

    // ATS
    const jobDescriptionInput = document.getElementById("jobDescription");
    const resumeTextForATSInput = document.getElementById(
      "resumeTextForATS"
    );
    const useCurrentResumeBtn = document.getElementById(
      "useCurrentResumeBtn"
    );
    const checkATSBtn = document.getElementById("checkATSBtn");
    const atsScoreValue = document.getElementById("atsScoreValue");
    const atsScoreChip = document.getElementById("atsScoreChip");
    const atsScoreHelp = document.getElementById("atsScoreHelp");

    function buildPlainTextResume() {
      const parts = [];
      if (nameInput.value) parts.push(nameInput.value);
      if (headlineInput.value) parts.push(headlineInput.value);
      if (summaryInput.value) parts.push(summaryInput.value);
      if (experienceInput.value) parts.push(experienceInput.value);
      if (educationInput.value) parts.push(educationInput.value);
      if (skillsInput.value) parts.push(skillsInput.value);
      if (projects.length) {
        projects.forEach((p) => {
          parts.push(p.title, p.desc, p.link || "");
        });
      }
      return parts.join("\n");
    }

    useCurrentResumeBtn.addEventListener("click", () => {
      const text = buildPlainTextResume();
      resumeTextForATSInput.value = text;
    });

    function tokenize(text) {
      return text
        .toLowerCase()
        .replace(/[^a-z0-9\s]/g, " ")
        .split(/\s+/)
        .filter((w) => w.length > 2);
    }

    checkATSBtn.addEventListener("click", async () => {
  const jdText = jobDescriptionInput.value.trim();
  const resumeText = resumeTextForATSInput.value.trim();

  if (!jdText || !resumeText) {
    alert("Please paste both a job description and resume text first.");
    return;
  }

  atsScoreValue.textContent = "‚Ä¶";
  atsScoreChip.textContent = "Checking‚Ä¶";
  atsScoreHelp.textContent = "Sending your data to the local ATS backend for analysis.";

  try {
    const response = await fetch("http://127.0.0.1:8000/ats-score", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        job_description: jdText,
        resume_text: resumeText,
      }),
    });

    if (!response.ok) {
      throw new Error("Server error: " + response.status);
    }

    const data = await response.json();
    const score = data.score ?? 0;

    atsScoreValue.textContent = score + "%";

    let levelText = "";

    if (score >= 75) {
      levelText = "Strong match";
      atsScoreChip.style.borderColor = "rgba(74, 222, 128, 0.8)";
      atsScoreChip.style.background = "rgba(22, 163, 74, 0.16)";
      atsScoreChip.style.color = "#14532d";
    } else if (score >= 50) {
      levelText = "Okay match";
      atsScoreChip.style.borderColor = "rgba(234, 179, 8, 0.8)";
      atsScoreChip.style.background = "rgba(234, 179, 8, 0.12)";
      atsScoreChip.style.color = "#713f12";
    } else {
      levelText = "Weak match";
      atsScoreChip.style.borderColor = "rgba(239, 68, 68, 0.8)";
      atsScoreChip.style.background = "rgba(153, 27, 27, 0.16)";
      atsScoreChip.style.color = "#7f1d1d";
    }

    atsScoreChip.textContent = levelText;

    const matched = data.matched_keywords || [];
    const missing = data.missing_keywords || [];

    atsScoreHelp.textContent =
      `Matched ${matched.length} keywords, missing ${missing.length}. ` +
      `Examples matched: ${matched.slice(0, 5).join(", ") || "none"}.`;
  } catch (err) {
    console.error(err);
    atsScoreValue.textContent = "‚Äì";
    atsScoreChip.textContent = "Error";
    atsScoreChip.style.borderColor = "rgba(239, 68, 68, 0.8)";
    atsScoreChip.style.background = "rgba(153, 27, 27, 0.16)";
    atsScoreChip.style.color = "#fecaca";
    atsScoreHelp.textContent =
      "Could not reach the ATS backend. Make sure the FastAPI server is running on http://127.0.0.1:8000.";
  }
});


    // THEME TOGGLE
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const themeLabel = document.getElementById("themeLabel");
    let isDark = true;

    themeToggle.addEventListener("click", () => {
      isDark = !isDark;
      document.body.classList.toggle("light-theme", !isDark);
      themeIcon.textContent = isDark ? "üåô" : "‚òÄÔ∏è";
      themeLabel.textContent = isDark ? "Dark" : "Light";
    });
  </script>
</body>
</html>
